# 目录结构

Linux 目录配置的依据是 [FHS](https://link.juejin.cn/?target=https%3A%2F%2Fwww.pathname.com%2Ffhs%2F)（Filesystem Hierarchy Standard）标准，使得不同的发行版的文件目录都有一些相似性

FHS 定义出两层规范出来：

1. 第一层是 `/` 下的各个目录应该要放置什么样内容的档案数据，例如 `/etc` 放置配置文件，`/bin` 则应该要放置可执行文件
2. 第二层则是针对 `/usr` 及 `/var` 这两个目录的次目录来定义的

FHS 仅是定义出 `/`、`/usr`、`/var` 目录存放的内容， 因此在其它的目录层级，开发者可以自行配置。

![](http://oss.xiefeng.tech/img/20210414134158.jpg)

- `/bin`：一些可被运行的二进制文件，比如常用的 cd cp find chmod chown 等命令
- `/sbin`：一些系统管理员才会动用到的执行指令，例如 fdisk, mke2fs, fsck, mkswap, mount 等
- `/dev`：设备和接口设备都以文件的形式存在此目录下，还包括标准输入、标准错误和标准输出
- 在其中的外接设备是不能直接被使用的，需要挂载
- `/etc`：系统主要的配置文件，比如用户的账号密码和各服务的启动文件等
- `/proc`：存储的是运行的进程，这个目录是一个虚拟的目录，它是系统内存的映射
- `/opt`：给主机额外安装软件所摆放的目录，optional(可选) 的缩写
- `/tmp`：存放系统运行时候产生的临时文件
- `/media`：Linux 会把一些识别的设备（例如U盘、光驱）挂载到这个目录下
- `/mnt`：当外接设备需要挂载的时候，就需要挂载到该目录下
- `/usr`：包含系统的主要程序、 图形接口所需要的文件、额外的函式库、自行安装的软件，以及共享的目录与文件等，类似于 windows 下的 program files 目录
- `/var`：存放经常被修改的文件

/bin, /sbin, /usr/bin, /usr/sbin 存放系统预设的所有可执行文件，Centos7把所有能够使用的命令都放在这里，/bin /sbin 链接到这里

/usr/local/：本机端自行安装的软件预设放置的目录

/usr/lib：各应用软件的函式库档案放置目录



- /var/cache/：应用程序本身运行过程中产生的一些缓存
- /var/lib/：应用程序执行过程中需要使用的数据文件
- /var/log/：日志文件存放目录
- /var/run/：某些程序启动之后的PID放在此目录下，链接到/run目录

特殊路径：`~`，表示当前用户的家目录。

```shell
xf@ubuntu:/$ cd ~
xf@ubuntu:~$ pwd
/home/xf
```

# 常用操作

- `ls`：列出指定目录（默认 `.`）下的所有文件和文件夹
	- `-l`：表示以详细列表的形式进行展示，`ls -l` 等于 `ll` 指令
	- `-a`：表示显示所有的文件和文件夹，包含隐藏的文件和文件夹
	- `-h`：显示文档大小的时候以可读性较高的形式显示，需要和 `l` 选项结合，不然没什么用
	- `-R`：递归显示
	- `-r`：逆序显示，默认按文件名顺序显示
	- `-t`：按最后修改时间顺序（从后到前）显示，`-rt` 按时间顺序逆序
	- `-d`：将目录名像其他文件一样列出，而不是列出目录中的内容

```shell
ls [-lah] path
```

- `mkdir`：创建文件夹
	- `-p`：若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录
	- 要创建多个目录，多个目录路径之间用空格隔开

```shell
mkdir [-p] path
```

- `touch`：创建新的空文件
	- 要创建多个文件，多个文件路径之间用空格隔开

```shell
touch path [path path]
```

- `cp`：复制文件 / 文件夹
	- `-r`：将指定目录下的所有文件与子目录一并处理
	- `-p`：保留用户、权限、时间等文件属性
	- 将文件复制到新位置时可以对文件顺便重命名

```shell
cp [-r] path path
```

- `mv`：移动文件 / 文件夹到新的位置

```shell
mv path path
```

在 Linux 中 `mv` 命令也用于重命名：

```shell
mv test.txt hehe.txt
```

- `rm`：删除文档 / 文件夹
	- `-f`：强制删除，不提示是否删除
	- `-r`：递归删除，删除文件夹时需要

```shell
rm [-fr] name
```

- `rmdir`：删除**空文件夹**
	- `-p`：从最后一层依次向上删除，等于依次对每一个空文件夹执行 `rmdir`，遇到非空停止

```shell
rmdir dir3/dir/dir/dir  -p
```

# 打包压缩

最早的 Linux 备份介质是磁带，使⽤用的命令是 tar

可以将打包后的磁带⽂文件进⾏行行压缩储存，压缩的命令是 gzip 和 bzip2

## gizp

- 压缩后的格式为：`*.gz`
- 不能保存原文件
- 不能压缩目录，只能压缩文件

```shell
gzip buodo #压缩
gunzip buodo.gz  #解压
```

## bzip2

- 压缩后的格式：`.bz2`
- 不能压缩目录，只能压缩文件
- `-k` 选项用于压缩保留原文件

```shell
bzip2 boduo #压缩

bunzip2 boduo.bz2  #解压
```

## zip

- 压缩后的格式：`.zip`
- 可以压缩目录
- 会保留原文件
- `-r` 用于递归压缩，压缩文件夹时需要该选项，解压时不需要

```shell
zip boduo.zip boduo # 压缩

unzip boduo.zip # 解压
```

## tar

- 常用选项
  - `-v`：显示操作过程
  - `-c`： 打包
  - `-x`： 解包
  - `-f`： 指定备份文件
- 压缩选项
  - `-z`：用gzip来压缩/解压缩 文件
  - `-j`：用bzip2来压缩/解压缩文件
- 这些选项都可以不用加 `-` 

```shell
# 压缩
tar -zvcf buodo.tar.gz buodo  
tar -jvcf buodo.tar.bz2 buodo

# 解压
tar -zvxf buodo.tar.gz 
tar -jvxf buodo.tar.bz2 
```

# 文本查看

- `cat`：将文件的内容打印到标准输出设备上
	- 可以打开多个文件，多个文件路径之间用空格隔开

```shell
cat /etc
```

- `head`：查看一个文件的前 n 行，默认前 10 行
	- `-n`：表示文件的前 n 行，默认为 10

```shell
head [-n] path
```

- `tail`：查看一个文件的后 n 行，默认后 10 行
	- `-n`：表示文件的后 n 行，默认为 10
	- `-f`：查看一个文件的动态变化内容，一般用于查看系统的日志

```shell
tail [-n] path
```

- `less`：用来浏览文字档案的内容，通过辅助功能键前或向后浏览文件
	- 用 ↑ 键向上翻页，用 ↓ 键向下翻页
	- 退出按 q 键

```shell
less path
```

- `wc`：统计文件内容信息（包含行数、单词数、字节数）
	- `-l`：只显示列数
	- `-w`：只显示字数
	- `-c`：只显示字节数

```shell
wc [-lwc] path
```
